<section class="dashboard-content" dir="rtl">
  <div class="management-header">
    <h2>إضافة عميد جديد</h2>
  </div>
  <form [formGroup]="deanForm" (ngSubmit)="saveDean()">
    <div class="tabs">
      <div class="tab-headers">
        <button type="button" class="tab-header" [class.active]="activeTab === 'basic'" (click)="activeTab = 'basic'">
          <i class="pi pi-info-circle"></i> المعلومات الأساسية
        </button>
        <button type="button" class="tab-header" [class.active]="activeTab === 'message'" (click)="activeTab = 'message'">
          <i class="pi pi-book"></i> الرسالة
        </button>
        <button type="button" class="tab-header" [class.active]="activeTab === 'closing'" (click)="activeTab = 'closing'">
          <i class="pi pi-comment"></i> البيانات الختامية
        </button>
      </div>

      <!-- Basic Info Tab -->
      <div class="tab-content" [class.active]="activeTab === 'basic'">
        <div class="form-grid">
          <div class="form-group">
            <label>المعرف *</label>
            <input 
              type="text" 
              class="form-control" 
              formControlName="id"
              placeholder="أدخل معرف العميد"
            >
          </div>
          <div class="form-group">
            <label>الاسم *</label>
            <input 
              type="text" 
              class="form-control" 
              formControlName="name"
              placeholder="أدخل الاسم"
            >
          </div>
          <div class="form-group">
            <label>المنصب *</label>
            <input 
              type="text" 
              class="form-control" 
              formControlName="position"
              placeholder="أدخل المنصب"
            >
          </div>
          <div class="form-group">
            <label>رابط الصورة</label>
            <input 
              type="url" 
              class="form-control" 
              formControlName="photo"
              placeholder="أدخل رابط الصورة"
            >
          </div>
          <div class="form-group full-width">
            <label>التحية *</label>
            <textarea 
              class="form-control" 
              formControlName="greeting"
              rows="4"
              placeholder="أدخل التحية"
            ></textarea>
          </div>
          <div class="form-group full-width">
            <label>الإبراز *</label>
            <textarea 
              class="form-control" 
              formControlName="highlight"
              rows="3"
              placeholder="أدخل الإبراز"
            ></textarea>
          </div>
          <div class="form-group full-width">
            <label>دعوة للعمل *</label>
            <textarea 
              class="form-control" 
              formControlName="callToAction"
              rows="3"
              placeholder="أدخل دعوة للعمل"
            ></textarea>
          </div>
        </div>
      </div>

      <!-- Message Tab -->
      <div class="tab-content" [class.active]="activeTab === 'message'">
        <div class="section-header">
          <h4>الرسالة</h4>
          <button 
            type="button"
            class="btn-add-item"
            (click)="addMessage()"
          >
            <i class="pi pi-plus"></i>
            إضافة فقرة رسالة
          </button>
        </div>
        <div formArrayName="message">
          <div 
            *ngFor="let msg of messageArray.controls; let i = index"
            class="experience-item"
          >
            <div class="item-header">
              <h5>الفقرة {{ i + 1 }}</h5>
              <button 
                type="button"
                class="btn-remove"
                (click)="removeMessage(i)"
              >
                <i class="pi pi-trash"></i>
              </button>
            </div>
            <div class="form-grid">
              <div class="form-group full-width">
                <label>نص الفقرة *</label>
                <textarea 
                  class="form-control" 
                  [formControlName]="i"
                  rows="4"
                  placeholder="أدخل فقرة الرسالة"
                ></textarea>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Closing Tab -->
      <div class="tab-content" [class.active]="activeTab === 'closing'">
        <div class="section-header">
          <h4>البيانات الختامية</h4>
          <button 
            type="button"
            class="btn-add-item"
            (click)="addClosing()"
          >
            <i class="pi pi-plus"></i>
            إضافة بيان ختامي
          </button>
        </div>
        <div formArrayName="closing">
          <div 
            *ngFor="let closing of closingArray.controls; let i = index"
            class="experience-item"
          >
            <div class="item-header">
              <h5>البيان {{ i + 1 }}</h5>
              <button 
                type="button"
                class="btn-remove"
                (click)="removeClosing(i)"
              >
                <i class="pi pi-trash"></i>
              </button>
            </div>
            <div class="form-grid">
              <div class="form-group full-width">
                <label>نص البيان *</label>
                <textarea 
                  class="form-control" 
                  [formControlName]="i"
                  rows="3"
                  placeholder="أدخل البيان الختامي"
                ></textarea>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Form Actions -->
      <div class="dialog-actions">
        <button 
          type="button"
          class="btn-outline-primary-custom"
          [routerLink]="['/dashboard/about']"
        >
          إلغاء
        </button>
        <button 
          type="submit"
          class="btn-primary-custom"
          [disabled]="deanForm.invalid"
        >
          إنشاء عميد
        </button>
      </div>
    </div>
  </form>
</section>

<!-- Toast Messages -->
<div class="toast-container" *ngIf="showToast">
  <div class="toast" [class]="toastClass">
    <div class="toast-content">
      <i [class]="toastIcon"></i>
      <span>{{ toastMessage }}</span>
    </div>
    <button type="button" class="toast-close" (click)="hideToast()">×</button>
  </div>
</div>